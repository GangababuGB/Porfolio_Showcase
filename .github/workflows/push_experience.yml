name: Push Experience Reminder

on:
  schedule:
    - cron: '*/5 * * * *'  # runs every 5 minutes
  workflow_dispatch:       # allows manual trigger

jobs:
  push:
    runs-on: ubuntu-latest
    env:
      PUSHBULLET_TOKEN: ${{ secrets.PUSHBULLET_TOKEN }}
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.x'

      - name: Install requests
        run: pip install requests

      - name: Run Pushbullet script
        run: echo "Running Pushbullet script" && python GB_experience_pushbullet.py

      - name: Create GitHub Mobile Notification
        uses: peter-evans/create-issue@v5
        with:
          title: "ğŸ“Œ Experience Summary Update"
          body: |
            Hello @GangababuGB ğŸ‘‹

            âŒ Exclude Non-IT (Tata Communication): $exp1

            ğŸ”„ Include Career Transition (Great Learning + Road Map IT + Nuvento): $exp2

            ğŸ’¼ Relevant Experience (Road Map IT + Nuvento): $exp3

            ğŸŒŸ Overall Experience (Tata + IT roles, excluding Great Learning): $overall_exp
          labels: "experience-update"
